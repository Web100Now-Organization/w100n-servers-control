# Database Migrations для start_server_setting

Ця папка містить SQL міграції для модуля `start_server_setting`.

## Структура

Міграції виконуються автоматично в порядку імен файлів (алфавітному).

- `01-init-servers-table.sql` - Створює таблицю `servers` для зберігання конфігурації серверів
- `02-init-server-setups-table.sql` - Створює таблицю `server_setups` для активних процесів setup

## Як додати нову міграцію

1. Створіть новий SQL файл з номером версії, наприклад:
   - `03-add-new-column.sql`
   - `04-update-index.sql`

2. Використовуйте `IF NOT EXISTS` або `DO $$ BEGIN ... END $$` для безпечного виконання

3. Міграції виконуються автоматично при старті сервера через `server.go`

## Відстеження виконаних міграцій

Всі виконані міграції зберігаються в таблиці `schema_migrations` з повним шляхом файлу як унікальним ідентифікатором.

Приклад:
- `app/plugins/w100n_servers_control/modules/start_server_setting/migrations/01-init-servers-table.sql`

Це гарантує, що міграції з різних плагінів не конфліктують між собою.

## Важливо

- Завжди використовуйте транзакції для безпечних міграцій
- Не видаляйте старі міграції - вони використовуються для відстеження
- Тестуйте міграції на копії бази даних перед застосуванням на production

